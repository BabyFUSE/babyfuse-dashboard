{"remainingRequest":"/Users/cheynehayworth/projects/BabyCake-dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cheynehayworth/projects/BabyCake-dashboard/src/components/WalletConnect.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cheynehayworth/projects/BabyCake-dashboard/src/components/WalletConnect.vue","mtime":1649041140818},{"path":"/Users/cheynehayworth/projects/BabyCake-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1649036669776},{"path":"/Users/cheynehayworth/projects/BabyCake-dashboard/node_modules/babel-loader/lib/index.js","mtime":1649036668310},{"path":"/Users/cheynehayworth/projects/BabyCake-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1649036669776},{"path":"/Users/cheynehayworth/projects/BabyCake-dashboard/node_modules/vue-loader/lib/index.js","mtime":1649036669290}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGV0aGVycyB9IGZyb20gImV0aGVycyI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFdhbGxldENvbm5lY3RQcm92aWRlciBmcm9tICJAd2FsbGV0Y29ubmVjdC93ZWIzLXByb3ZpZGVyIjsKaW1wb3J0IHsgV2FsbGV0VHlwZSB9IGZyb20gIi4uL01ldGFtYXNrU2VydmljZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIldhbGxldENvbm5lY3QiLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNNb2JpbGU6IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsic2lnbmVyQWRkcmVzcyJdKSwKICAgIC4uLm1hcEdldHRlcnMoWyJ3YWxsZXRQcm92aWRlclR5cGUiXSksCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5kZXRlY3RNb2JpbGUoKTsKCiAgICBjb25zb2xlLmxvZygiU2lnbmVyIGFkZHJlc3MiLCB0aGlzLnNpZ25lckFkZHJlc3MpOwoKICAgIGlmICh0aGlzLnNpZ25lckFkZHJlc3MgJiYgdGhpcy53YWxsZXRQcm92aWRlclR5cGUpIHsKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiZGFzaGJvYXJkIiB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGNvbm5lY3RNZXRhbWFzaygpIHsKICAgICAgaWYgKHdpbmRvdy5ldGhlcmV1bSAhPSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHsgbWV0aG9kOiAiZXRoX3JlcXVlc3RBY2NvdW50cyIgfSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVTaWduZXJBZGRyZXNzIiwgYWNjb3VudHNbMF0pOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlV2FsbGV0UHJvdmlkZXJUeXBlIiwgV2FsbGV0VHlwZS5NZXRhbWFzayk7CgogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogImRhc2hib2FyZCIgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLmlzQW5kcm9pZCAmJiAhdGhpcy5pc0lvcykgYWxlcnQoIlBsZWFzZSBpbnN0YWxsIE1ldGFNYXNrISIpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgY29ubmVjdFdhbGxldENvbm5lY3QoKSB7CiAgICAgIGNvbnN0IHdhbGxldENvbm5lY3RQcm92aWRlciA9IG5ldyBXYWxsZXRDb25uZWN0UHJvdmlkZXIoewogICAgICAgIHJwYzogeyA1NjogImh0dHBzOi8vYnNjLWRhdGFzZWVkLmJpbmFuY2Uub3JnLyIgfSwKICAgICAgICBjaGFpbklkOiA1NiwKICAgICAgICBxcmNvZGU6IHRydWUsIC8vIFJlcXVpcmVkCiAgICAgIH0pOwoKICAgICAgYXdhaXQgd2FsbGV0Q29ubmVjdFByb3ZpZGVyLmVuYWJsZSgpOwoKICAgICAgYXdhaXQgdGhpcy51cGRhdGVEYXRhT25BY2NvdW50Q2hhbmdlKHdhbGxldENvbm5lY3RQcm92aWRlcik7CgogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICJkYXNoYm9hcmQiIH0pOwoKICAgICAgLy8gU3Vic2NyaWJlIHRvIGFjY291bnRzIGNoYW5nZQogICAgICB3YWxsZXRDb25uZWN0UHJvdmlkZXIub24oImFjY291bnRzQ2hhbmdlZCIsIGFjY291bnRzID0+IHsKICAgICAgICB0aGlzLnVwZGF0ZURhdGFPbkFjY291bnRDaGFuZ2Uod2FsbGV0Q29ubmVjdFByb3ZpZGVyKTsKICAgICAgfSk7CgogICAgICAvLyBTdWJzY3JpYmUgdG8gY2hhaW5JZCBjaGFuZ2UKICAgICAgd2FsbGV0Q29ubmVjdFByb3ZpZGVyLm9uKCJjaGFpbkNoYW5nZWQiLCBjaGFpbklkID0+IHsKICAgICAgICBjb25zb2xlLmxvZygiY2hhaW4gY2hhbmdlZDogIiwgY2hhaW5JZCk7CiAgICAgIH0pOwoKICAgICAgLy8gU3Vic2NyaWJlIHRvIHNlc3Npb24gZGlzY29ubmVjdGlvbgogICAgICB3YWxsZXRDb25uZWN0UHJvdmlkZXIub24oImRpc2Nvbm5lY3QiLCAoY29kZSwgcmVhc29uKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coIkRpc2Nvbm5lY3QiLCByZWFzb24pOwoKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImxvZ291dCIpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogImNvbm5lY3Qtd2FsbGV0IiB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgdXBkYXRlRGF0YU9uQWNjb3VudENoYW5nZSh3YWxsZXRDb25uZWN0UHJvdmlkZXIpIHsKICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgZXRoZXJzLnByb3ZpZGVycy5XZWIzUHJvdmlkZXIod2FsbGV0Q29ubmVjdFByb3ZpZGVyKTsKCiAgICAgIGNvbnNvbGUubG9nKCJ3ZWIzIHByb3ZpZGVyOiIsIHByb3ZpZGVyKTsKICAgICAgY29uc29sZS5sb2coIndhbGxldCBwcm92aWRlcjoiLCB3YWxsZXRDb25uZWN0UHJvdmlkZXIpOwoKICAgICAgY29uc3Qgc2lnbmVyID0gcHJvdmlkZXIuZ2V0U2lnbmVyKCk7CiAgICAgIGNvbnNvbGUubG9nKCJzaWduZXI6Iiwgc2lnbmVyKTsKICAgICAgY29uc3QgYWRkcmVzcyA9IGF3YWl0IHNpZ25lci5nZXRBZGRyZXNzKCk7CgogICAgICBjb25zb2xlLmxvZygic2lnbmVyIGFkZHJlc3M6IiwgYWRkcmVzcyk7CgogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZVNpZ25lckFkZHJlc3MiLCBhZGRyZXNzKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVXYWxsZXRQcm92aWRlclR5cGUiLCBXYWxsZXRUeXBlLldhbGxldENvbm5lY3QpOwogICAgfSwKICAgIGRldGVjdE1vYmlsZSgpIHsKICAgICAgaWYgKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgewogICAgICAgIHRoaXMuaXNNb2JpbGUgPSB0cnVlOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["WalletConnect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WalletConnect.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <section class=\"connect-wallet\">\n    <div class=\"logo\">\n      <img src=\"@/assets/images/beaglecakeLogo.png\" class=\"logo-section\" />\n      <h1 class=\"logo-title\">beaglecake</h1>\n    </div>\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"section-2\">\n          <div class=\"connect-to-wallet\">\n            <img src=\"@/assets/images/beaglecakeLogo.png\" class=\"logo-section\" />\n            <div class=\"text-show-1\">Welcome to the Baby Fuse Dapp</div>\n            <div class=\"content-main\">\n              <div class=\"text-1\">You are not connected to Baby Fuse Dapp yet</div>\n              <div class=\"line-2\">\n                To use the Dapp, make sure: <br /><span\n                  >You are using the <span class=\"text-color\">Fuse Network</span> network</span\n                ><br /><span>and you need to connect wallet to use</span><br />\n                <div style=\"margin-top: 40px;\">\n                  <a href=\"https://tutorials.fuse.io/tutorials/network-tutorials/adding-fuse-network-to-metamask\" target=\"_blank\"> Metamask</a\n                  ><br />\n                </div>\n              </div>\n            </div>\n            <div class=\"button-wrapper\">\n              <button\n                id=\"connectBtn\"\n                type=\"button\"\n                class=\"el-button button-custom-new el-button--primary el-button--medium\"\n                @click=\"connectMetamask()\"\n              >\n                <i class=\"el-icon-connection\"></i>\n                <span>Connect to a wallet </span>\n              </button>\n              <br />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport { ethers } from \"ethers\";\nimport { mapGetters } from \"vuex\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport { WalletType } from \"../MetamaskService\";\n\nexport default {\n  name: \"WalletConnect\",\n\n  data() {\n    return {\n      isMobile: false,\n    };\n  },\n  computed: {\n    ...mapGetters([\"signerAddress\"]),\n    ...mapGetters([\"walletProviderType\"]),\n  },\n  mounted() {\n    this.detectMobile();\n\n    console.log(\"Signer address\", this.signerAddress);\n\n    if (this.signerAddress && this.walletProviderType) {\n      this.$router.replace({ path: \"dashboard\" });\n    }\n  },\n  methods: {\n    async connectMetamask() {\n      if (window.ethereum != undefined) {\n        const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" });\n        this.$store.commit(\"updateSignerAddress\", accounts[0]);\n        this.$store.commit(\"updateWalletProviderType\", WalletType.Metamask);\n\n        this.$router.push({ path: \"dashboard\" });\n      } else {\n        if (!this.isAndroid && !this.isIos) alert(\"Please install MetaMask!\");\n      }\n    },\n    async connectWalletConnect() {\n      const walletConnectProvider = new WalletConnectProvider({\n        rpc: { 56: \"https://bsc-dataseed.binance.org/\" },\n        chainId: 56,\n        qrcode: true, // Required\n      });\n\n      await walletConnectProvider.enable();\n\n      await this.updateDataOnAccountChange(walletConnectProvider);\n\n      this.$router.push({ path: \"dashboard\" });\n\n      // Subscribe to accounts change\n      walletConnectProvider.on(\"accountsChanged\", accounts => {\n        this.updateDataOnAccountChange(walletConnectProvider);\n      });\n\n      // Subscribe to chainId change\n      walletConnectProvider.on(\"chainChanged\", chainId => {\n        console.log(\"chain changed: \", chainId);\n      });\n\n      // Subscribe to session disconnection\n      walletConnectProvider.on(\"disconnect\", (code, reason) => {\n        console.log(\"Disconnect\", reason);\n\n        this.$store.commit(\"logout\");\n        this.$router.push({ path: \"connect-wallet\" });\n      });\n    },\n    async updateDataOnAccountChange(walletConnectProvider) {\n      const provider = new ethers.providers.Web3Provider(walletConnectProvider);\n\n      console.log(\"web3 provider:\", provider);\n      console.log(\"wallet provider:\", walletConnectProvider);\n\n      const signer = provider.getSigner();\n      console.log(\"signer:\", signer);\n      const address = await signer.getAddress();\n\n      console.log(\"signer address:\", address);\n\n      this.$store.commit(\"updateSignerAddress\", address);\n      this.$store.commit(\"updateWalletProviderType\", WalletType.WalletConnect);\n    },\n    detectMobile() {\n      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n        this.isMobile = true;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\nhtml {\n  height: 100%;\n}\n\n.logo {\n  display: flex;\n  margin-top: -100px;\n  margin-left: 30px;\n\n  margin-bottom: 100px;\n}\n\n.logo .logo-section {\n  width: 60px;\n  height: 60px;\n}\n\n.logo .logo-title {\n  margin: 15px;\n  font-size: 26px;\n  text-transform: uppercase;\n  font-weight: 700;\n}\n\n.section-2 .button-wrapper {\n  margin-top: 20px;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.button-custom-new {\n  border-radius: 10px !important;\n  font-size: 15px !important;\n  -webkit-transition: all 0.3s linear;\n  transition: all 0.3s linear;\n  flex: 1 0 100%;\n  height: 44px;\n}\n\n.line-2 span .text-color {\n  color: #00aaa6;\n}\n\n.button-wrapper {\n  margin-bottom: 40px;\n}\n\n#connectBtn {\n  border-radius: 20px !important;\n  display: inline-block;\n  line-height: 34px;\n  white-space: nowrap;\n  cursor: pointer;\n  border: none;\n  background-image: linear-gradient(-90deg, rgb(58, 179, 176) 0%, rgb(110, 99, 157) 100%);\n  color: #c4c6e7;\n  -webkit-appearance: none;\n  text-align: center;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  outline: none;\n  margin: 0;\n  -webkit-transition: 0.1s;\n  transition: 0.1s;\n  font-weight: 400;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  padding: 0;\n\n  font-size: 22px !important;\n  font-weight: 500;\n  font-family: \"Rancho\", cursive;\n}\n\n#connectBtn:active,\n#connectBtn:focus,\n#connectBtn:hover {\n  background-size: 200% auto;\n  background-position: 100%;\n  background-image: linear-gradient(90deg, rgb(58, 179, 176) 0%, rgb(110, 99, 157) 100%);\n  color: #ffffffd3;\n  transition: all 0.1s linear;\n}\n</style>\n"]}]}